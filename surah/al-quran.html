
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Al-Qur'an Teta Dakwa</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Amiri&family=Roboto&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">


<style>
  body {
    font-family: 'Roboto', sans-serif;
    font-size: 0.8rem;
    background: #ffffff;
    color: #1c1c1c;
    padding: 2rem;
    max-width: 900px;
    margin: auto;
  }

  #penanda {
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    background-color: #e0f7ff;
    border: 1px solid #00bcd4;
    border-radius: 6px;
    color: #006064;
    font-size: 0.95rem;
    display: flex;
    align-items: center;
  }

  .logo-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: 'Segoe UI', sans-serif;
    margin-bottom: 1rem;
  }

 .logo-icon {
  background-color: #2196f3; /* biru solid */
  color: white;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  box-shadow: 0 2px 5px rgba(0,0,0,0.15);
}

  .logo-text {
  font-weight: 700;
  font-size: 1.1rem;
  color: #2196f3; /* sama biru dengan ikon */
}

  select,
  input {
    width: 100%;
    padding: 12px;
    margin-bottom: 1rem;
    font-size: 1rem;
    border: 1px solid #ff9800;
    border-radius: 8px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    box-sizing: border-box;
    background-color: #fff8e1;
    color: #e65100;
  }

  .ayat {
    background: #e3f2fd;
    border-left: 6px solid #2196f3;
    border-radius: 10px;
    padding: 1rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.07);
  }

  .arab {
    font-family: 'Amiri', serif;
    font-size: 1.8rem;
    text-align: right;
    direction: rtl;
    color: #0d47a1;
    margin-bottom: 0.5rem;
  }

  .arti {
    margin-bottom: 0.5rem;
    line-height: 1.6;
    color: #4e342e;
  }

  .tafsir {
    font-size: 0.8rem;
    line-height: 1.6;
    background: #ffffff;
    padding: 0.8rem;
    border-radius: 8px;
    margin-top: 0.5rem;
    border: 1px dashed #ba68c8;
    color: #6a1b9a;
  }

  .nomor {
    font-size: 0.85rem;
    color: #000000;
    margin-top: 0.5rem;
    text-align: right;
  }

  button {
    margin-top: 0.5rem;
    padding: 6px 12px;
    font-size: 0.9rem;
    cursor: pointer;
    background-color: #ffffff;
    border: 1px solid #ff9800;
    color: #e65100;
    border-radius: 5px;
    transition: 0.3s ease;
  }

  button:hover {
    background-color: #ffcc80;
  }

 #searchWrapper {
  position: relative;
  width: 100%;
}

#searchWrapper i {
  position: absolute;
  top: 37%;
  left: 16px;
  transform: translateY(-50%);
  color: #1e88e5; /* biru terang */
  font-size: 1.1rem;
  pointer-events: none;
  display: flex;
  align-items: center;
  height: 100%;
}

#search {
  width: 100%;
  padding: 0.6rem 1rem 0.6rem 2.5rem;
  border: 2px solid #1e88e5; /* biru terang */
  border-radius: 8px;
  background-color: #e3f2fd; /* latar biru muda */
  color: #0d47a1; /* teks biru gelap */
  font-size: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  box-sizing: border-box;
  line-height: normal;
}

#search:focus {
  border-color: #1565c0; /* biru sedikit lebih gelap saat fokus */
  background-color: #bbdefb; /* latar sedikit lebih gelap saat fokus */
  outline: none;
}


  #hasil {
    margin-top: 1rem;
    font-size: 1rem;
    color: #3f51b5;
  }

  @media (max-width: 768px) {
    body {
      padding: 1rem;
    }
  }

  @media (max-width: 600px) {
    .arab {
      font-size: 1.4rem;
    }

    #search {
      font-size: 0.95rem;
      padding: 0.5rem 0.8rem 0.5rem 2rem;
    }

    #searchWrapper i {
      left: 12px;
      font-size: 0.95rem;
    }
  }

  #searchWrapper,
  #hasil {
    transition: all 0.3s ease;
  }

  .hidden {
    display: none;
  }
</style>

</head>

	<body>
	
	  <div class="logo-wrapper">
	  <div class="logo-icon">
		<i class="fas fa-mosque"></i>
	  </div>
	  <span class="logo-text">AL QURAN TETA DAKWA</span>
	</div>


  <select id="surahSelect">
   <option value="1">1. Al-Fatihah</option>
	<option value="2">2. Al-Baqarah</option>
	<option value="3">3. Ali Imran</option>
	<option value="4">4. An-Nisa</option>
	<option value="5">5. Al-Ma'idah</option>
	<option value="6">6. Al-An'am</option>
	<option value="7">7. Al-A'raf</option>
	<option value="8">8. Al-Anfal</option>
	<option value="9">9. At-Taubah</option>
	<option value="10">10. Yunus</option>
	<option value="11">11. Hud</option>
	<option value="12">12. Yusuf</option>
	<option value="13">13. Ar-Ra'd</option>
	<option value="14">14. Ibrahim</option>
	<option value="15">15. Al-Hijr</option>
	<option value="16">16. An-Nahl</option>
	<option value="17">17. Al-Isra</option>
	<option value="18">18. Al-Kahf</option>
	<option value="19">19. Maryam</option>
	<option value="20">20. Ta-Ha</option>
	<option value="21">21. Al-Anbiya</option>
	<option value="22">22. Al-Hajj</option>
	<option value="23">23. Al-Mu'minun</option>
	<option value="24">24. An-Nur</option>
	<option value="25">25. Al-Furqan</option>
	<option value="26">26. Ash-Shu'ara</option>
	<option value="27">27. An-Naml</option>
	<option value="28">28. Al-Qasas</option>
	<option value="29">29. Al-Ankabut</option>
	<option value="30">30. Ar-Rum</option>
	<option value="31">31. Luqman</option>
	<option value="32">32. As-Sajdah</option>
	<option value="33">33. Al-Ahzab</option>
	<option value="34">34. Saba</option>
	<option value="35">35. Fatir</option>
	<option value="36">36. Ya-Sin</option>
	<option value="37">37. As-Saffat</option>
	<option value="38">38. Sad</option>
	<option value="39">39. Az-Zumar</option>
	<option value="40">40. Ghafir</option>
	<option value="41">41. Fussilat</option>
	<option value="42">42. Ash-Shura</option>
	<option value="43">43. Az-Zukhruf</option>
	<option value="44">44. Ad-Dukhan</option>
	<option value="45">45. Al-Jathiyah</option>
	<option value="46">46. Al-Ahqaf</option>
	<option value="47">47. Muhammad</option>
	<option value="48">48. Al-Fath</option>
	<option value="49">49. Al-Hujurat</option>
	<option value="50">50. Qaf</option>
	<option value="51">51. Adh-Dhariyat</option>
	<option value="52">52. At-Tur</option>
	<option value="53">53. An-Najm</option>
	<option value="54">54. Al-Qamar</option>
	<option value="55">55. Ar-Rahman</option>
	<option value="56">56. Al-Waqi'ah</option>
	<option value="57">57. Al-Hadid</option>
	<option value="58">58. Al-Mujadilah</option>
	<option value="59">59. Al-Hashr</option>
	<option value="60">60. Al-Mumtahanah</option>
	<option value="61">61. As-Saff</option>
	<option value="62">62. Al-Jumu'ah</option>
	<option value="63">63. Al-Munafiqun</option>
	<option value="64">64. At-Taghabun</option>
	<option value="65">65. At-Talaq</option>
	<option value="66">66. At-Tahrim</option>
	<option value="67">67. Al-Mulk</option>
	<option value="68">68. Al-Qalam</option>
	<option value="69">69. Al-Haqqah</option>
	<option value="70">70. Al-Ma'arij</option>
	<option value="71">71. Nuh</option>
	<option value="72">72. Al-Jinn</option>
	<option value="73">73. Al-Muzzammil</option>
	<option value="74">74. Al-Muddaththir</option>
	<option value="75">75. Al-Qiyamah</option>
	<option value="76">76. Al-Insan</option>
	<option value="77">77. Al-Mursalat</option>
	<option value="78">78. An-Naba</option>
	<option value="79">79. An-Nazi'at</option>
	<option value="80">80. Abasa</option>
	<option value="81">81. At-Takwir</option>
	<option value="82">82. Al-Infitar</option>
	<option value="83">83. Al-Mutaffifin</option>
	<option value="84">84. Al-Inshiqaq</option>
	<option value="85">85. Al-Buruj</option>
	<option value="86">86. At-Tariq</option>
	<option value="87">87. Al-A'la</option>
	<option value="88">88. Al-Ghashiyah</option>
	<option value="89">89. Al-Fajr</option>
	<option value="90">90. Al-Balad</option>
	<option value="91">91. Ash-Shams</option>
	<option value="92">92. Al-Lail</option>
	<option value="93">93. Adh-Dhuha</option>
	<option value="94">94. Ash-Sharh</option>
	<option value="95">95. At-Tin</option>
	<option value="96">96. Al-'Alaq</option>
	<option value="97">97. Al-Qadr</option>
	<option value="98">98. Al-Bayyinah</option>
	<option value="99">99. Az-Zalzalah</option>
	<option value="100">100. Al-‘Adiyat</option>
	<option value="101">101. Al-Qari‘ah</option>
	<option value="102">102. At-Takathur</option>
	<option value="103">103. Al-‘Asr</option>
	<option value="104">104. Al-Humazah</option>
	<option value="105">105. Al-Fil</option>
	<option value="106">106. Quraysh</option>
	<option value="107">107. Al-Ma’un</option>
	<option value="108">108. Al-Kawthar</option>
	<option value="109">109. Al-Kafirun</option>
	<option value="110">110. An-Nasr</option>
	<option value="111">111. Al-Masad</option>
	<option value="112">112. Al-Ikhlas</option>
	<option value="113">113. Al-Falaq</option>
	<option value="114">114. An-Nas</option>  
  </select>
  
  
  <div id="searchWrapper">
    <i class="fas fa-search"></i>
    <input type="text" id="search" placeholder="Cari kata di terjemahan (misal: sabar, nikmat)">
  </div>

  <div id="hasil">Silakan pilih surah.</div>
  

	
	
  <script>
  
  
  let ayatList = [];

  const surahSelect = document.getElementById("surahSelect");
  const hasil = document.getElementById("hasil");





// Styling elegan dan colorful langsung dari JavaScript
function styleSurahSelect() {
  const select = document.getElementById("surahSelect");
  if (!select) return;

  select.style.padding = "0.5rem 1rem";
  select.style.borderRadius = "8px";
  select.style.border = "2px solid #1565c0"; // biru tua
  select.style.backgroundColor = "#e3f2fd"; // biru muda
  select.style.color = "#0d47a1"; // teks biru gelap
  select.style.fontWeight = "bold";
  select.style.fontSize = "1rem";
  select.style.boxShadow = "0 2px 5px rgba(0,0,0,0.1)";
  select.style.outline = "none";
  select.style.cursor = "pointer";
  select.style.transition = "all 0.3s ease";

  select.addEventListener("focus", () => {
    select.style.borderColor = "#1e88e5"; // biru sedang
    select.style.backgroundColor = "#bbdefb"; // biru terang
  });

  select.addEventListener("blur", () => {
    select.style.borderColor = "#1565c0"; // kembali ke biru tua
    select.style.backgroundColor = "#e3f2fd"; // kembali ke biru muda
  });
}


// Jalankan styling saat halaman dimuat
styleSurahSelect();


// fungsi pemilihian surat-------------------------------------------------------------------------------

function setupLayout() {
  const select = document.getElementById("surahSelect");
  const search = document.getElementById("search");

  // Bungkus dalam satu container
  let wrapper = document.getElementById("inputWrapper");
  if (!wrapper) {
    wrapper = document.createElement("div");
    wrapper.id = "inputWrapper";
    wrapper.style.display = "flex";
    wrapper.style.flexWrap = "wrap";
    wrapper.style.gap = "1rem";
    wrapper.style.margin = "1rem 0";

    // Sisipkan wrapper sebelum hasil
    hasil.parentNode.insertBefore(wrapper, hasil);
  }

  // Pindahkan select dan search ke dalam wrapper
  if (select && select.parentNode !== wrapper) {
    wrapper.appendChild(select);
  }
  if (search && search.parentNode !== wrapper) {
    wrapper.appendChild(search);
  }

  // Tambahkan style umum
  [select, search].forEach(el => {
    el.style.flex = "1 1 300px";
    el.style.maxWidth = "100%";
  });

  // Responsif manual untuk mobile
  function updateLayout() {
    if (window.innerWidth <= 600) {
      wrapper.style.flexDirection = "column";
    } else {
      wrapper.style.flexDirection = "row";
    }
  }

  // Jalankan sekarang dan saat resize
  updateLayout();
  window.addEventListener("resize", updateLayout);
}



  // Tambahkan penanda ---------------------------------------------------------------------------------------------------
  
  let penandaDiv = document.getElementById("penanda");
  if (!penandaDiv) {
    penandaDiv = document.createElement("div");
    penandaDiv.id = "penanda";
    penandaDiv.style.marginBottom = "1rem";
    penandaDiv.style.fontWeight = "bold";
    penandaDiv.style.color = "#2b7a3d";
    hasil.parentNode.insertBefore(penandaDiv, hasil);
  }

  function convertToArabicNumber(num) {
  const arabicDigits = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩'];
  return String(num).split('').map(d => arabicDigits[d]).join('');
}

function loadSurah(nomorSurah) {
  hasil.innerHTML = `<i class="fas fa-spinner fa-spin" style="color:#1e88e5; font-size:1.2rem;"></i> <span style="margin-left:8px;">Memuat...</span>`;

  fetch(`${nomorSurah}.json`)
    .then(res => res.json())
    .then(json => {
      const surah = json[nomorSurah];
      const arab = surah.text;
      const arti = surah.translations.id.text;
      const tafsir = surah.tafsir?.id?.kemenag?.text || {};

      ayatList = Object.keys(arab).map(nomor => ({
        nomor: nomor,
        arab: `${arab[nomor]} <span style="color:#2b9348; font-size:0.9em;">﴿${convertToArabicNumber(nomor)}﴾</span>`,
        arti: arti[nomor],
        tafsir: tafsir[nomor] || "(Tafsir tidak tersedia)"
      }));

      tampilkanAyat(ayatList);
      tampilkanPenanda();
      scrollKePenanda();
    })
    .catch(err => {
      hasil.innerHTML = "<p>❌ Gagal memuat surah. Pastikan file tersedia.</p>";
    });
}


// funsgi tampilan ayat-------------------------------------------------------------------------------------------------------------------------------
function tampilkanAyat(daftar) {
  if (daftar.length === 0) {
    hasil.innerHTML = "<p>❌ Tidak ada ayat yang cocok.</p>";
    return;
  }

  const surahNum = String(surahSelect.value);
  const audioURL = `https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${surahNum}.mp3`;

  const penanda = JSON.parse(localStorage.getItem("penanda") || "{}");
  const lastAyat = penanda[surahNum];

  let audioPlayer = `
    <div style="margin-bottom: 1rem;">
      <audio controls style="width:100%">
        <source src="${audioURL}" type="audio/mpeg">
        Audio tidak tersedia.
      </audio>
    </div>
  `;

  const ayatHTML = daftar.map((a, i) => {
    const isLastRead = a.nomor === lastAyat;
    const iconClass = isLastRead ? "fas" : "far";
    const iconColor = isLastRead ? "#f59e0b" : "#555";

    return `
      <div class="ayat" id="ayat-${a.nomor}">
        <div class="arab">${a.arab}</div>
        <div class="arti"><strong>Artinya:</strong> ${a.arti}</div>

        <button onclick="toggleTafsir(${i})" id="btn-${i}" style="flex-grow: 1;">
          <i class="fas fa-book"></i> Lihat Tafsir
        </button>

        <button onclick="tandaiAyat('${a.nomor}')" id="mark-${a.nomor}" style="margin-left: 0.5rem;">
          <i class="${iconClass} fa-bookmark" style="color:${iconColor};"></i> Tandai
        </button>

        <div class="tafsir" id="tafsir-${i}" style="display:none; text-align: justify;">
          <strong>Tafsir:</strong> ${a.tafsir}
        </div>
        <div class="nomor">Ayat ${a.nomor}</div>
      </div>
    `;
  }).join("");

  hasil.innerHTML = audioPlayer + ayatHTML;
}

function tampilkanPenanda() {
  const surah = surahSelect.value;
  const penanda = JSON.parse(localStorage.getItem("penanda") || "{}");
  const nomorAyat = penanda[surah];

  if (nomorAyat) {
    const namaSurah = surahSelect.options[surahSelect.selectedIndex].text;
    const totalAyat = ayatList.length;
    
    penandaDiv.innerHTML = `
      <i class="fas fa-bookmark" style="color: #1e88e5; margin-right: 6px;"></i>
      <span style="color: #0d47a1;">Terakhir dibaca: <strong>${namaSurah}</strong>, Ayat <strong>${nomorAyat}</strong> dari <strong>${totalAyat}</strong> ayat</span>
    `;
  } else {
    penandaDiv.innerHTML = "";
  }
}



function scrollKePenanda() {
  const surah = surahSelect.value;
  const penanda = JSON.parse(localStorage.getItem("penanda") || "{}");
  const nomorAyat = penanda[surah];

  if (nomorAyat) {
    const ayatElem = document.getElementById(`ayat-${nomorAyat}`);
    if (ayatElem) {
      setTimeout(() => {
        ayatElem.scrollIntoView({ behavior: "smooth", block: "center" });
      }, 300);
    }
  }
}

function tandaiAyat(nomorAyat) {
  const surah = surahSelect.value;
  let penanda = JSON.parse(localStorage.getItem("penanda") || "{}");
  penanda[surah] = nomorAyat;
  localStorage.setItem("penanda", JSON.stringify(penanda));
  tampilkanPenanda();

  document.querySelectorAll("button[id^='mark-']").forEach(btn => {
    const icon = btn.querySelector("i");
    if (icon) {
      icon.className = "far fa-bookmark";
      icon.style.color = "#555";
    }
  });

  const aktifBtn = document.getElementById(`mark-${nomorAyat}`);
  if (aktifBtn) {
    const icon = aktifBtn.querySelector("i");
    if (icon) {
      icon.className = "fas fa-bookmark";
      icon.style.color = "#f59e0b";
    }
  }
}

function toggleTafsir(i) {
  const tafsirDiv = document.getElementById(`tafsir-${i}`);
  const btn = document.getElementById(`btn-${i}`);
  const icon = btn.querySelector("i");

  if (tafsirDiv.style.display === "none") {
    tafsirDiv.style.display = "block";
    icon.className = "fas fa-book-open";
    btn.childNodes[1].nodeValue = " Sembunyikan Tafsir";
  } else {
    tafsirDiv.style.display = "none";
    icon.className = "fas fa-book";
    btn.childNodes[1].nodeValue = " Lihat Tafsir";
  }
}

document.getElementById("search").addEventListener("input", e => {
  const keyword = e.target.value.trim().toLowerCase();
  if (!keyword || keyword.length < 2) {
    tampilkanAyat(ayatList);
    tampilkanPenanda();
    return;
  }

  const hasilFilter = ayatList.filter(a =>
    a.arti.toLowerCase().includes(keyword)
  );
  tampilkanAyat(hasilFilter);
});

surahSelect.addEventListener("change", e => {
  const nomor = e.target.value;
  if (nomor) loadSurah(nomor);
});

loadSurah(1);

</script>


</body>
</html>
